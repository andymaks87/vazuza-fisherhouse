<!-- index.php -->
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ğ”Ğ¾Ğ¼ Ñƒ Ğ²Ğ¾Ğ´Ñ‹ Ğ¥Ğ»ĞµĞ¿ĞµĞ½ÑŒ | Ğ’Ğ°Ğ·ÑƒĞ·ÑĞºĞ¾Ğµ Ğ²Ğ¾Ğ´Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ</title>

<!-- FAVICONS (Ğ²ÑĞµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ»ĞµĞ¶Ğ°Ñ‚ÑŒ Ñ€ÑĞ´Ğ¾Ğ¼ Ñ index.php) -->
<link rel="icon" href="favicon.ico" sizes="any">
<link rel="icon" type="image/svg+xml" href="favicon.svg" sizes="any">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
<meta name="theme-color" content="#0b2d3a">

<style>
*{margin:0;padding:0;box-sizing:border-box}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   THEME / VARIABLES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
:root{
  --primary:#1b4d6b;
  --primary-2:#0b2d3a;
  --accent:#67d1ff;
  --accent-2:#8ef3ff;

  --text:#0b1b24;
  --muted:#4b6472;
  --card:#ffffff;
  --card2:#f7fbff;
  --border:rgba(27,77,107,0.18);

  --shadow:0 12px 34px rgba(0,0,0,0.12);
  --shadow2:0 18px 60px rgba(0,0,0,0.18);

  --gradient:linear-gradient(135deg,#0b2d3a,#1b4d6b 45%,#1b6f91);
  --heroOverlay:linear-gradient(rgba(3,18,26,0.50),rgba(3,18,26,0.60));
  --btnGrad:linear-gradient(135deg,#2b9cff,#67d1ff);
  --btnGrad2:linear-gradient(135deg,#0e3d55,#1b4d6b);
  --focusGlow:0 0 0 4px rgba(103,209,255,0.22);
}

body{
  /* Ğ¤Ğ¾Ğ»Ğ±ÑĞº Ğ´Ğ»Ñ emoji/ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ² (Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ĞºĞ²Ğ°Ğ´Ñ€Ğ°Ñ‚Ñ‹ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ ğŸŒ³/â‚½ Ğ¸ Ñ‚.Ğ¿.) */
  font-family:'Segoe UI','Segoe UI Emoji','Segoe UI Symbol','Apple Color Emoji','Noto Color Emoji',sans-serif;
  line-height:1.6;
  color:var(--text);
  overflow-x:hidden;
  cursor:auto;
  background:linear-gradient(180deg,#f9fcff,#f3fbff 40%,#ffffff);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SERVICE UI
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.copy-notification{
  position:fixed;top:20px;right:20px;
  background:linear-gradient(135deg,#2fdc88,#1bbf78);
  color:white;padding:14px 20px;border-radius:12px;
  box-shadow:0 12px 30px rgba(0,0,0,0.22);
  z-index:10001;opacity:0;transform:translateY(-18px);
  transition:all .25s;pointer-events:none;font-weight:800
}
.copy-notification.show{opacity:1;transform:translateY(0)}

.loading-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,0.75);
  display:none;align-items:center;justify-content:center;
  z-index:10000
}
.loading-overlay.active{display:flex}
.loading-content{text-align:center;color:white}
.spinner{
  width:60px;height:60px;border:4px solid rgba(255,255,255,0.3);
  border-top-color:white;border-radius:50%;
  animation:spin 1s linear infinite;margin:0 auto 18px
}
@keyframes spin{to{transform:rotate(360deg)}}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   NAV
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
nav{
  position:fixed;top:0;width:100%;
  padding:18px 50px;
  background:rgba(11,45,58,0.92);
  backdrop-filter:blur(10px);
  z-index:1000;border-bottom:1px solid rgba(255,255,255,0.06)
}
.nav-container{max-width:1400px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}
.logo{
  font-size:1.45rem;font-weight:900;color:white;letter-spacing:0.2px;
  display:flex;align-items:center;gap:10px
}
.logo-badge{
  display:inline-flex;align-items:center;justify-content:center;
  width:34px;height:34px;border-radius:12px;
  background:rgba(255,255,255,0.10);
  border:1px solid rgba(255,255,255,0.16)
}
.logo-title{display:inline-flex;align-items:center;gap:6px}
.logo-title span{opacity:0.92}
.nav-links{display:flex;gap:26px;list-style:none}
.nav-links a{
  color:rgba(255,255,255,0.92);text-decoration:none;transition:color .2s;
  cursor:pointer;font-weight:700
}
.nav-links a:hover{color:var(--accent)}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   HERO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hero{
  min-height:100vh;display:flex;align-items:center;
  padding:8rem 5% 4rem;background:var(--gradient);
  position:relative;overflow:hidden
}
.hero::before{content:'';position:absolute;inset:0;background:var(--heroOverlay)}
.hero-container{max-width:1400px;margin:0 auto;position:relative;z-index:2;text-align:center}
.hero-content h1{
  font-size:clamp(2.55rem,5vw,4.05rem);
  color:white;margin-bottom:18px;
  text-shadow:0 14px 35px rgba(0,0,0,0.35)
}
.hero-subtitle{
  font-size:clamp(1.15rem,2vw,1.5rem);
  color:rgba(255,255,255,0.92);
  margin-bottom:30px
}
.hero-features{display:flex;gap:22px;justify-content:center;margin-bottom:40px;flex-wrap:wrap;color:white}
.hero-feature{display:flex;align-items:center;gap:8px;font-size:1.05rem;font-weight:700}
.hero-feature::before{
  content:"âœ“";display:inline-block;width:24px;height:24px;
  background:rgba(103,209,255,0.95);
  color:#003245;border-radius:50%;
  text-align:center;line-height:24px;font-weight:1000
}
.cta-buttons{display:flex;gap:16px;justify-content:center;flex-wrap:wrap}

/* Ğ½Ğ¸Ğ¶Ğ½ÑÑ Ğ²Ğ¾Ğ»Ğ½Ğ° */
.water-effect{
  position:absolute;bottom:0;left:0;right:0;height:130px;
  background:
    url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 160"><path fill="rgba(255,255,255,0.14)" d="M0,80 Q240,40 480,80 T960,80 T1440,80 L1440,160 L0,160 Z"/><path fill="rgba(103,209,255,0.10)" d="M0,110 Q260,80 520,110 T1040,110 T1560,110 L1560,160 L0,160 Z"/></svg>');
  background-size:1200px 160px;
  animation:wave 10s linear infinite;
  z-index:1;pointer-events:none
}
@keyframes wave{0%{background-position:0 0}100%{background-position:1200px 0}}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SECTIONS / CARDS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
section{padding:80px 5%;max-width:1400px;margin:0 auto}
.section-title{
  font-size:clamp(2rem,4vw,3rem);
  text-align:center;margin-bottom:18px;color:var(--primary);
  letter-spacing:0.2px
}
.section-subtitle{text-align:center;font-size:1.15rem;color:var(--muted);margin-bottom:56px}

.features-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:26px}
.feature-card{
  background:linear-gradient(180deg,var(--card),var(--card2));
  padding:38px 30px;border-radius:22px;
  box-shadow:var(--shadow);
  text-align:center;transition:all .28s;
  border:1px solid var(--border);
  position:relative;overflow:hidden
}
.feature-card::after{
  content:"";position:absolute;inset:-2px;
  background:radial-gradient(closest-side, rgba(103,209,255,0.22), transparent 65%);
  opacity:0;transition:opacity .28s
}
.feature-card:hover{
  transform:translateY(-10px);
  box-shadow:var(--shadow2);
  border-color:rgba(43,156,255,0.35)
}
.feature-card:hover::after{opacity:1}
.feature-icon{font-size:3rem;margin-bottom:18px;display:block}
.feature-card h3{font-size:1.5rem;margin-bottom:12px;color:var(--primary);font-weight:900}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   BUTTONS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.btn{
  padding:14px 36px;font-size:1.05rem;border:none;border-radius:999px;
  cursor:pointer;transition:all .25s;text-decoration:none;display:inline-block;
  font-weight:900;letter-spacing:0.15px
}
.btn-primary{
  background:var(--btnGrad);
  color:#062231;
  box-shadow:0 14px 30px rgba(43,156,255,0.28);
  border:1px solid rgba(255,255,255,0.25)
}
.btn-primary:hover{transform:translateY(-4px) scale(1.03);box-shadow:0 18px 40px rgba(43,156,255,0.35)}
.btn-secondary{
  background:transparent;color:white;border:2px solid rgba(255,255,255,0.85)
}
.btn-secondary:hover{background:rgba(255,255,255,0.95);color:#062231}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   GALLERY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.gallery{background:linear-gradient(180deg,#f1f9ff,#ffffff)}
.gallery-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:18px}
.gallery-item{
  position:relative;overflow:hidden;border-radius:18px;height:310px;
  cursor:pointer;transition:all .28s;background-size:cover;background-position:center;
  background-color:#dfeaf3;
  border:2px solid rgba(43,156,255,0.22);
  box-shadow:0 14px 34px rgba(0,0,0,0.14)
}
.gallery-item::before{
  content:"";position:absolute;inset:10px;border-radius:14px;
  border:1px solid rgba(255,255,255,0.55);
  box-shadow:inset 0 0 0 1px rgba(11,45,58,0.18);
  pointer-events:none
}
.gallery-item:hover{
  transform:translateY(-6px) scale(1.02);
  box-shadow:0 22px 54px rgba(0,0,0,0.22);
  border-color:rgba(43,156,255,0.45)
}
.gallery-item::after{
  content:attr(data-title);
  position:absolute;bottom:0;left:0;right:0;padding:18px 18px 16px;
  background:linear-gradient(to top,rgba(0,0,0,0.78),transparent);
  color:white;font-size:1.15rem;font-weight:900;letter-spacing:0.2px
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   BOOKING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.booking-section{background:linear-gradient(135deg,#f3fbff,#e8f6ff);padding:80px 5%}
.booking-container{
  max-width:920px;margin:0 auto;
  background:linear-gradient(180deg,#ffffff,#f7fbff);
  border-radius:24px;padding:42px;
  box-shadow:var(--shadow2);
  border:1px solid rgba(43,156,255,0.16)
}
.booking-steps{display:flex;justify-content:space-between;margin-bottom:36px;position:relative}
.booking-steps::before{content:'';position:absolute;top:25px;left:10%;right:10%;height:2px;background:rgba(11,45,58,0.12);z-index:0}
.booking-step{text-align:center;flex:1;position:relative;z-index:1}
.step-circle{
  width:50px;height:50px;border-radius:50%;
  background:rgba(11,45,58,0.10);
  margin:0 auto 10px;display:flex;align-items:center;justify-content:center;
  font-weight:1000;transition:all .25s;color:var(--primary)
}
.step-circle.active{
  background:var(--btnGrad);
  color:#05202c;box-shadow:0 0 0 6px rgba(103,209,255,0.16)
}
.step-circle.completed{background:linear-gradient(135deg,#2fdc88,#1bbf78);color:white}
.step-label{font-size:0.92rem;color:var(--muted);font-weight:800}

.calendar-container{display:grid;grid-template-columns:1fr 1fr;gap:26px;margin-bottom:24px}
.calendar{
  background:linear-gradient(180deg,#ffffff,#f6fbff);
  padding:20px;border-radius:18px;
  border:1px solid rgba(43,156,255,0.16);
  box-shadow:0 12px 26px rgba(0,0,0,0.07)
}
.calendar-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}
.calendar-title{font-size:1.15rem;font-weight:1000;color:#1a2f3a}
.calendar-nav{
  background:var(--btnGrad2);color:white;border:none;
  width:38px;height:38px;border-radius:50%;
  cursor:pointer;font-size:1.25rem;transition:all .2s;
  box-shadow:0 10px 18px rgba(0,0,0,0.18)
}
.calendar-nav:hover{transform:scale(1.08);filter:brightness(1.1)}
.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:5px}
.weekday-header{text-align:center;font-weight:900;font-size:0.8rem;color:#5c7a8b;padding:5px}

.calendar-day{
  padding:10px;text-align:center;border-radius:10px;
  cursor:pointer;transition:all .2s;font-size:0.9rem;
  font-weight:800;color:#1b2f3a;
  background:rgba(11,45,58,0.03);
  border:1px solid rgba(43,156,255,0.10)
}
.calendar-day.disabled{
  color:#b9c9d2;cursor:not-allowed;background:rgba(11,45,58,0.02);
  border-color:rgba(11,45,58,0.06)
}

/* Ğ—ĞĞĞ¯Ğ¢Ğ (Ğ½Ğµ Ğ¾Ğ¿Ğ»Ğ°Ñ‡ĞµĞ½Ğ¾) */
.calendar-day.booked{
  background:linear-gradient(135deg,#ffe5e9,#ffd0d7);
  color:#9c1831;
  border-color:rgba(156,24,49,0.18)
}
.calendar-day.booked::after{
  content:'âœ•';position:absolute;top:2px;right:6px;font-size:0.75rem
}

/* ĞĞŸĞ›ĞĞ§Ğ•ĞĞ */
.calendar-day.paid{
  background:linear-gradient(135deg,#d9fff2,#b7ffe9);
  color:#0a6b4a;
  border-color:rgba(10,107,74,0.18)
}
.calendar-day.paid::after{
  content:'âœ“';position:absolute;top:2px;right:6px;font-size:0.75rem
}

/* Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ::after Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ» */
.calendar-day.booked,
.calendar-day.paid{position:relative}

/* Ğ´Ğ°Ñ‚Ğ° Ğ·Ğ°Ğ½ÑÑ‚Ğ°, Ğ½Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ° ĞºĞ°Ğº "Ğ´Ğ°Ñ‚Ğ° Ğ²Ñ‹ĞµĞ·Ğ´Ğ°" */
.calendar-day.can-checkout{
  cursor:pointer;
  outline:2px dashed rgba(43,156,255,0.35);
  outline-offset:0;
}

.calendar-day:not(.disabled):hover{
  background:rgba(103,209,255,0.18);
  transform:scale(1.05);
  border-color:rgba(43,156,255,0.26)
}
.calendar-day.selected{
  background:var(--btnGrad) !important;
  color:#05202c !important;
  font-weight:1000 !important;
  outline:none !important;
}
.calendar-day.in-range{background:rgba(43,156,255,0.14)}

.booking-summary{
  background:linear-gradient(135deg,#0e3d55,#1b4d6b);
  color:white;padding:24px;border-radius:18px;margin-bottom:18px;
  border:1px solid rgba(255,255,255,0.10);
  box-shadow:0 16px 36px rgba(0,0,0,0.18)
}
.summary-row{display:flex;justify-content:space-between;margin-bottom:12px;font-size:1.05rem;font-weight:800}
.summary-total{font-size:1.7rem;font-weight:1100;border-top:1px solid rgba(255,255,255,0.22);padding-top:14px;margin-top:12px}

.form-group{margin-bottom:18px}
.form-group label{display:block;margin-bottom:8px;font-weight:900;color:#153241}
.form-group input,.form-group textarea{
  width:100%;padding:12px 14px;border:2px solid rgba(43,156,255,0.14);
  border-radius:14px;font-size:1rem;transition:all .2s;font-family:inherit;
  background:linear-gradient(180deg,#ffffff,#f6fbff);
  box-shadow:0 10px 18px rgba(0,0,0,0.05)
}
.form-group textarea{resize:vertical;min-height:88px}
.form-group input:focus,.form-group textarea:focus{
  outline:none;border-color:rgba(43,156,255,0.55);
  box-shadow:var(--focusGlow),0 12px 22px rgba(0,0,0,0.07)
}

.field-error{
  margin-top:8px;
  color:#b42318;
  font-weight:900;
  font-size:0.92rem;
  display:none;
}
.field-error.show{display:block}

.booking-nav-buttons{display:flex;gap:12px;margin-top:26px}
.booking-nav-buttons button{
  flex:1;padding:14px;border:none;border-radius:14px;font-size:1.05rem;
  font-weight:1000;cursor:pointer;transition:all .2s
}
.btn-back{
  background:linear-gradient(180deg,#ffffff,#f2f7fb);
  color:#143241;border:1px solid rgba(11,45,58,0.12)
}
.btn-back:hover{transform:translateY(-2px);box-shadow:0 14px 26px rgba(0,0,0,0.08)}
.btn-next{
  background:var(--btnGrad);color:#05202c;border:1px solid rgba(255,255,255,0.26)
}
.btn-next:hover{transform:translateY(-2px);box-shadow:0 18px 36px rgba(43,156,255,0.28)}
.btn-next:disabled{background:rgba(11,45,58,0.12);cursor:not-allowed;color:rgba(11,45,58,0.45);box-shadow:none}

.confirm-button{
  width:100%;padding:16px;background:linear-gradient(135deg,#2fdc88,#1bbf78);
  color:white;border:none;border-radius:14px;font-size:1.15rem;font-weight:1100;
  cursor:pointer;transition:all .2s;box-shadow:0 18px 34px rgba(47,220,136,0.22)
}
.confirm-button:hover{transform:translateY(-2px);box-shadow:0 22px 44px rgba(47,220,136,0.30)}
.confirm-button:disabled{background:rgba(11,45,58,0.12);cursor:not-allowed;color:rgba(11,45,58,0.45);box-shadow:none}

.pay-button{
  width:100%;padding:16px;background:linear-gradient(135deg,#ffd54f,#ffb300);
  color:#2a1c00;border:none;border-radius:14px;font-size:1.15rem;font-weight:1100;
  cursor:pointer;transition:all .2s;box-shadow:0 18px 34px rgba(255,179,0,0.22)
}
.pay-button:hover{transform:translateY(-2px);box-shadow:0 22px 44px rgba(255,179,0,0.28)}
.pay-button:disabled{background:rgba(11,45,58,0.12);cursor:not-allowed;color:rgba(11,45,58,0.45);box-shadow:none}

.success-message{
  background:linear-gradient(135deg,#2fdc88,#1bbf78);
  color:white;padding:28px;border-radius:18px;text-align:center;display:none;
  box-shadow:0 18px 44px rgba(0,0,0,0.18)
}
.success-message.show{display:block}
.success-message h3{font-size:1.9rem;margin-bottom:12px}
.success-message p{font-size:1.05rem;line-height:1.8}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   MAP / LOCATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.map-section{padding:0;margin-top:80px}
.map-container{display:grid;grid-template-columns:1fr 1fr;min-height:520px}
.map-info{padding:58px;background:linear-gradient(180deg,#f2faff,#ffffff)}
.map-info h2{font-size:2.35rem;color:var(--primary);margin-bottom:26px;font-weight:1100}
.location-item{
  display:flex;align-items:center;margin-bottom:14px;font-size:1.05rem;
  padding:12px 14px;background:linear-gradient(180deg,#ffffff,#f6fbff);
  border-radius:14px;cursor:pointer;transition:all .2s;
  border:1px solid rgba(43,156,255,0.14);
  box-shadow:0 12px 22px rgba(0,0,0,0.06);
  font-weight:800;color:#123040
}
.location-item:hover{transform:translateX(5px);box-shadow:0 18px 36px rgba(0,0,0,0.10)}
.location-item::before{content:"ğŸ“";margin-right:12px;font-size:1.25rem}

.map-buttons{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:22px}
.map-btn{
  padding:12px 14px;font-size:0.95rem;border:1px solid rgba(43,156,255,0.20);
  background:var(--btnGrad);color:#05202c;border-radius:14px;cursor:pointer;
  transition:all .2s;font-weight:1000;text-decoration:none;display:inline-block;text-align:center;
  box-shadow:0 14px 26px rgba(43,156,255,0.22)
}
.map-btn:hover{transform:translateY(-2px);filter:brightness(1.05)}
#map{width:100%;height:100%;min-height:520px}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   FOOTER + DOCS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
footer{
  background:linear-gradient(180deg,#071e28,#04141b);
  color:white;padding:60px 5% 30px
}
.footer-content{
  max-width:1200px;margin:0 auto;
  display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:38px;margin-bottom:34px
}
.footer-column h4{margin-bottom:18px;color:var(--accent);font-size:1.18rem;font-weight:1000}
.footer-column ul{list-style:none}
.footer-column li{margin-bottom:11px}
.footer-column a{color:rgba(255,255,255,0.82);text-decoration:none;transition:color .2s;cursor:pointer;font-weight:700}
.footer-column a:hover{color:var(--accent-2)}
.footer-bottom{text-align:center;padding-top:26px;border-top:1px solid rgba(255,255,255,0.10);color:rgba(255,255,255,0.68)}

.doc-links{display:flex;flex-direction:column;gap:10px;margin-top:10px}
.doc-link{
  display:inline-flex;align-items:center;gap:10px;
  padding:0;border:none;background:transparent;box-shadow:none;
  color:rgba(255,255,255,0.86);
  font-weight:900;cursor:pointer;transition:color .2s, transform .2s;
  text-decoration:none
}
.doc-link:hover{color:var(--accent-2);transform:translateX(2px)}
.doc-link:active{transform:translateX(0)}
.doc-emoji{width:22px;text-align:center}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   MODAL DOCS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.modal-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,0.70);
  display:none;align-items:center;justify-content:center;
  z-index:11000;padding:18px
}
.modal-overlay.show{display:flex}
.modal{
  width:min(980px,95vw);
  max-height:85vh;
  background:linear-gradient(180deg,#ffffff,#f7fbff);
  border-radius:18px;
  border:1px solid rgba(43,156,255,0.18);
  box-shadow:0 26px 90px rgba(0,0,0,0.35);
  overflow:hidden;
}
.modal-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:16px 18px;
  background:linear-gradient(135deg,#0e3d55,#1b4d6b);
  color:white
}
.modal-title{font-weight:1100;font-size:1.05rem;letter-spacing:0.2px}
.modal-close{
  border:none;background:rgba(255,255,255,0.14);color:white;
  width:36px;height:36px;border-radius:10px;cursor:pointer;font-size:18px;font-weight:1100;
  transition:all .2s
}
.modal-close:hover{background:rgba(255,255,255,0.22);transform:scale(1.03)}
.modal-body{
  padding:18px 18px 20px;
  overflow:auto;
  color:#0b1b24
}
.modal-body h3{margin:12px 0 10px;color:#0e3d55;font-weight:1100}
.modal-body p{margin:10px 0;color:#2a4655}
.modal-body ul{margin:10px 0 10px 20px}
.modal-body li{margin:6px 0}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   MOBILE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media (max-width:768px){
  .calendar-container{grid-template-columns:1fr}
  .nav-links{display:none}
  body{cursor:auto!important}
}
</style>
</head>

<body class="winter-theme">
<div class="copy-notification" id="copyNotification">âœ“ Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾!</div>

<div class="loading-overlay" id="loadingOverlay">
  <div class="loading-content">
    <div class="spinner"></div>
    <div style="font-size:1.2rem;font-weight:900">ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°...</div>
  </div>
</div>

<nav>
  <div class="nav-container">
    <div class="logo">
      <span class="logo-badge">ğŸ„</span>
      <span class="logo-title">Ğ”Ğ¾Ğ¼ Ñƒ Ğ²Ğ¾Ğ´Ñ‹ <span>â„ï¸</span></span>
    </div>
    <ul class="nav-links">
      <li><a onclick="scrollToSection('features')">Ğ Ğ´Ğ¾Ğ¼Ğµ</a></li>
      <li><a onclick="scrollToSection('gallery')">Ğ“Ğ°Ğ»ĞµÑ€ĞµÑ</a></li>
      <li><a onclick="scrollToSection('booking')">Ğ‘Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ</a></li>
      <li><a onclick="scrollToSection('location')">ĞšĞ°Ğº Ğ´Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒÑÑ</a></li>
    </ul>
  </div>
</nav>

<section class="hero">
  <div class="hero-container">
    <div class="hero-content">
      <h1>Ğ”Ğ¾Ğ¼ Ñƒ Ğ²Ğ¾Ğ´Ñ‹ Ğ½Ğ° Ğ’Ğ°Ğ·ÑƒĞ·ÑĞºĞ¾Ğ¼ Ğ²Ğ¾Ğ´Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ</h1>
      <p class="hero-subtitle">ĞŸÑ€ĞµĞ¼Ğ¸ÑƒĞ¼ Ğ¾Ñ‚Ğ´Ñ‹Ñ… Ğ´Ğ»Ñ Ñ€Ñ‹Ğ±Ğ°ĞºĞ¾Ğ² Ğ¸ Ğ¾Ñ…Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ¾Ğ² Ğ² 220 ĞºĞ¼ Ğ¾Ñ‚ ĞœĞ¾ÑĞºĞ²Ñ‹</p>

      <div class="hero-features">
        <div class="hero-feature">130 Ğ¼Â² ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ°</div>
        <div class="hero-feature">ĞŸÑ€ÑĞ¼Ğ¾Ğ¹ Ğ²Ñ‹Ñ…Ğ¾Ğ´ Ğº Ğ²Ğ¾Ğ´Ğµ</div>
        <div class="hero-feature">Ğ‘Ğ°Ğ½Ñ-Ğ±Ğ¾Ñ‡ĞºĞ°</div>
        <div class="hero-feature">Ğ”Ğ¾ 8 Ğ³Ğ¾ÑÑ‚ĞµĞ¹</div>
      </div>

      <div class="cta-buttons">
        <button class="btn btn-primary" onclick="scrollToSection('booking')">Ğ—Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button>
        <button class="btn btn-secondary" onclick="scrollToSection('gallery')">Ğ¡Ğ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ„Ğ¾Ñ‚Ğ¾</button>
      </div>
    </div>
  </div>
  <div class="water-effect"></div>
</section>

<section id="features">
  <h2 class="section-title">Ğ’ÑÑ‘ Ğ´Ğ»Ñ Ğ¸Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°</h2>
  <p class="section-subtitle">ĞœÑ‹ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞ¼Ğ°Ğ»Ğ¸ ĞºĞ°Ğ¶Ğ´ÑƒÑ Ğ´ĞµÑ‚Ğ°Ğ»ÑŒ Ğ²Ğ°ÑˆĞµĞ³Ğ¾ ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ°</p>

  <div class="features-grid">
    <div class="feature-card">
      <span class="feature-icon">ğŸ£</span>
      <h3>Ğ Ñ‹Ğ±Ğ°Ğ»ĞºĞ° Ğ¼ĞµÑ‡Ñ‚Ñ‹</h3>
      <p>Ğ©ÑƒĞºĞ°, ÑÑƒĞ´Ğ°Ğº, Ğ»ĞµÑ‰ ĞºÑ€ÑƒĞ³Ğ»Ñ‹Ğ¹ Ğ³Ğ¾Ğ´</p>
    </div>
    <div class="feature-card">
      <span class="feature-icon">ğŸ¡</span>
      <h3>Ğ¡Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¾Ğ¼</h3>
      <p>3 ÑĞ¿Ğ°Ğ»ÑŒĞ½Ğ¸, 2 ÑĞ°Ğ½ÑƒĞ·Ğ»Ğ°, ĞºÑƒÑ…Ğ½Ñ</p>
    </div>
    <div class="feature-card">
      <span class="feature-icon">â™¨ï¸</span>
      <h3>Ğ‘Ğ°Ğ½Ñ-Ğ±Ğ¾Ñ‡ĞºĞ°</h3>
      <p>ĞĞ° 6 Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº Ñ Ğ²Ğ¸Ğ´Ğ¾Ğ¼ Ğ½Ğ° Ğ²Ğ¾Ğ´Ñƒ</p>
    </div>
    <div class="feature-card">
      <span class="feature-icon">âš“</span>
      <h3>ĞŸÑ€Ğ¸Ñ‡Ğ°Ğ»</h3>
      <p>Ğ¡Ğ¿ÑƒÑĞº Ğº Ğ²Ğ¾Ğ´Ğµ, Ğ¿Ñ€Ğ¸Ñ‡Ğ°Ğ» Ğ´Ğ»Ñ Ğ»Ğ¾Ğ´Ğ¾Ğº</p>
    </div>
    <div class="feature-card">
      <span class="feature-icon">ğŸ”¥</span>
      <h3>Ğ‘Ğ°Ñ€Ğ±ĞµĞºÑ</h3>
      <p>Ğ‘ĞµÑĞµĞ´ĞºĞ°, Ğ¼Ğ°Ğ½Ğ³Ğ°Ğ», ĞºĞ¾Ğ¿Ñ‚Ğ¸Ğ»ÑŒĞ½Ñ</p>
    </div>
    <div class="feature-card">
      <span class="feature-icon">ğŸŒ³</span>
      <h3>Ğ£ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ</h3>
      <p>ĞŸÑ€Ğ¸Ñ€Ğ¾Ğ´Ğ° Ğ¸ Ñ‚Ğ¸ÑˆĞ¸Ğ½Ğ°</p>
    </div>
  </div>
</section>

<section id="booking" class="booking-section">
  <div class="booking-container">
    <h2 class="section-title" style="margin-bottom:10px">Ğ‘Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ</h2>
    <p class="section-subtitle" style="margin-bottom:36px">Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´Ğ°Ñ‚Ñ‹ Ğ¸ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ‚Ğµ Ğ±Ñ€Ğ¾Ğ½ÑŒ</p>

    <div class="booking-steps">
      <div class="booking-step">
        <div class="step-circle active" id="step1Circle">1</div>
        <div class="step-label">Ğ”Ğ°Ñ‚Ñ‹</div>
      </div>
      <div class="booking-step">
        <div class="step-circle" id="step2Circle">2</div>
        <div class="step-label">ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹</div>
      </div>
      <div class="booking-step">
        <div class="step-circle" id="step3Circle">3</div>
        <div class="step-label">Ğ¤Ğ¸Ğ½Ğ¸Ñˆ</div>
      </div>
    </div>

    <div id="bookingStep1">
      <div class="calendar-container">
        <div class="calendar">
          <div class="calendar-header">
            <button class="calendar-nav" onclick="changeMonth(-1)">â€¹</button>
            <div class="calendar-title" id="calendarTitle">Ğ¯Ğ½Ğ²Ğ°Ñ€ÑŒ 2026</div>
            <button class="calendar-nav" onclick="changeMonth(1)">â€º</button>
          </div>

          <div class="calendar-grid">
            <div class="weekday-header">ĞŸĞ½</div>
            <div class="weekday-header">Ğ’Ñ‚</div>
            <div class="weekday-header">Ğ¡Ñ€</div>
            <div class="weekday-header">Ğ§Ñ‚</div>
            <div class="weekday-header">ĞŸÑ‚</div>
            <div class="weekday-header">Ğ¡Ğ±</div>
            <div class="weekday-header">Ğ’Ñ</div>
          </div>
          <div class="calendar-grid" id="calendarDays"></div>
        </div>

        <div>
          <div class="booking-summary" id="bookingSummary" style="display:none">
            <div class="summary-row">
              <span>Ğ—Ğ°ĞµĞ·Ğ´:</span>
              <span id="checkInDate">-</span>
            </div>
            <div class="summary-row">
              <span>Ğ’Ñ‹ĞµĞ·Ğ´:</span>
              <span id="checkOutDate">-</span>
            </div>
            <div class="summary-row">
              <span>ĞĞ¾Ñ‡ĞµĞ¹:</span>
              <span id="nightsCount">0</span>
            </div>
            <div class="summary-total">
              <div class="summary-row" style="margin:0">
                <span>Ğ˜Ñ‚Ğ¾Ğ³Ğ¾:</span>
                <span id="totalPrice">0&#8381;</span>
              </div>
            </div>
          </div>

          <div style="margin-top:16px;padding:16px;border-radius:18px;background:linear-gradient(180deg,#ffffff,#f6fbff);border:1px solid rgba(43,156,255,0.14);box-shadow:0 12px 22px rgba(0,0,0,0.06)">
            <h4 style="margin-bottom:10px;color:#123040;font-weight:1100">Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ñ†ĞµĞ½Ğ°Ñ…</h4>
            <div style="margin-bottom:8px"><strong>Ğ‘ÑƒĞ´Ğ½Ğ¸:</strong> 7 500&#8381;/ÑÑƒÑ‚ĞºĞ¸</div>
            <div style="margin-bottom:8px"><strong>Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ:</strong> 10 000&#8381;/ÑÑƒÑ‚ĞºĞ¸</div>
            <div style="margin-bottom:8px"><strong>ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼:</strong> 2 Ğ½Ğ¾Ñ‡Ğ¸</div>
          </div>

          <div class="booking-nav-buttons">
            <button class="btn-next" onclick="goToStep(2)" id="step1Next" disabled>Ğ”Ğ°Ğ»ĞµĞµ â†’</button>
          </div>
        </div>
      </div>
    </div>

    <div id="bookingStep2" style="display:none">
      <div class="form-group">
        <label>Ğ˜Ğ¼Ñ Ğ¸ Ğ¤Ğ°Ğ¼Ğ¸Ğ»Ğ¸Ñ *</label>
        <input type="text" id="guestName" placeholder="Ğ˜Ğ²Ğ°Ğ½ Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ²" required>
        <div class="field-error" id="errName"></div>
      </div>
      <div class="form-group">
        <label>Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½ *</label>
        <input type="tel" id="guestPhone" placeholder="+7 (999) 123-45-67" required>
        <div class="field-error" id="errPhone"></div>
      </div>
      <div class="form-group">
        <label>Email *</label>
        <input type="email" id="guestEmail" placeholder="example@mail.ru" required>
        <div class="field-error" id="errEmail"></div>
      </div>
      <div class="form-group">
        <label>ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ³Ğ¾ÑÑ‚ĞµĞ¹ *</label>
        <input type="number" id="guestCount" min="1" max="8" value="2" required>
        <div class="field-error" id="errGuests"></div>
      </div>
      <div class="form-group">
        <label>ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹</label>
        <textarea id="guestComment" placeholder="ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: Ğ½ÑƒĞ¶Ğ½Ğ° Ğ´ĞµÑ‚ÑĞºĞ°Ñ ĞºÑ€Ğ¾Ğ²Ğ°Ñ‚ĞºĞ°, Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµĞ¼ Ñ Ğ»Ğ¾Ğ´ĞºĞ¾Ğ¹ Ğ¸ Ñ‚.Ğ´."></textarea>
      </div>

      <div class="booking-nav-buttons">
        <button class="btn-back" onclick="goToStep(1)">â† ĞĞ°Ğ·Ğ°Ğ´</button>
        <button class="btn-next" onclick="goToStep(3)" id="step2Next">Ğ”Ğ°Ğ»ĞµĞµ â†’</button>
      </div>
    </div>

    <div id="bookingStep3" style="display:none">
      <div class="booking-summary">
        <div class="summary-row">
          <span>ĞŸĞµÑ€Ğ¸Ğ¾Ğ´:</span>
          <span id="finalDates">-</span>
        </div>
        <div class="summary-row">
          <span>Ğ“Ğ¾ÑÑ‚ĞµĞ¹:</span>
          <span id="finalGuests">-</span>
        </div>
        <div class="summary-total">
          <div class="summary-row" style="margin:0">
            <span>Ğš Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğµ:</span>
            <span id="finalTotal">0&#8381;</span>
          </div>
        </div>
      </div>

      <button class="pay-button" onclick="payAndConfirm()" id="payBtn">ĞĞ¿Ğ»Ğ°Ñ‚Ğ¸Ñ‚ÑŒ Ğ¸ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ</button>
      <div style="height:10px"></div>
      <button class="confirm-button" onclick="sendRequest()" id="requestBtn">ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°ÑĞ²ĞºÑƒ (Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ)</button>

      <div style="text-align:center;color:#56707f;font-size:0.95rem;margin-top:18px;font-weight:800">
        ĞĞ¿Ğ»Ğ°Ñ‡ĞµĞ½Ğ½Ğ°Ñ Ğ±Ñ€Ğ¾Ğ½ÑŒ â€” Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´Ğ°ĞµÑ‚ÑÑ ÑÑ€Ğ°Ğ·Ñƒ. ĞĞµĞ¾Ğ¿Ğ»Ğ°Ñ‡ĞµĞ½Ğ½Ğ°Ñ â€” Ğ¿Ğ¾Ğ¿Ğ°Ğ´Ñ‘Ñ‚ Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ Ğ¸ Ğ±ÑƒĞ´ĞµÑ‚ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ° Ğ¿Ğ¾ÑĞ»Ğµ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸.
      </div>

      <div class="booking-nav-buttons">
        <button class="btn-back" onclick="goToStep(2)">â† ĞĞ°Ğ·Ğ°Ğ´</button>
      </div>

      <div class="success-message" id="successMessage" style="margin-top:18px">
        <h3>ğŸ‰ Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾!</h3>
        <p id="successText">Ğ—Ğ°ÑĞ²ĞºĞ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ°.</p>
      </div>
    </div>

  </div>
</section>

<section id="gallery" class="gallery">
  <h2 class="section-title">Ğ¤Ğ¾Ñ‚Ğ¾Ğ³Ğ°Ğ»ĞµÑ€ĞµÑ</h2>
  <p class="section-subtitle">12 Ñ„Ğ¾Ñ‚Ğ¾ (Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¸ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ)</p>
  <div class="gallery-grid">
    <div class="gallery-item" data-title="Ğ¤Ğ¾Ñ‚Ğ¾ 1" style="background-image:url('photos/1.jpg')"></div>
    <div class="gallery-item" data-title="Ğ¤Ğ¾Ñ‚Ğ¾ 2" style="background-image:url('photos/2.jpg')"></div>
    <div class="gallery-item" data-title="Ğ¤Ğ¾Ñ‚Ğ¾ 3" style="background-image:url('photos/3.jpg')"></div>
    <div class="gallery-item" data-title="Ğ¤Ğ¾Ñ‚Ğ¾ 4" style="background-image:url('photos/4.jpg')"></div>
    <div class="gallery-item" data-title="Ğ¤Ğ¾Ñ‚Ğ¾ 5" style="background-image:url('photos/5.jpg')"></div>
    <div class="gallery-item" data-title="Ğ¤Ğ¾Ñ‚Ğ¾ 6" style="background-image:url('photos/6.jpg')"></div>
    <div class="gallery-item" data-title="Ğ¤Ğ¾Ñ‚Ğ¾ 7" style="background-image:url('photos/7.jpg')"></div>
    <div class="gallery-item" data-title="Ğ¤Ğ¾Ñ‚Ğ¾ 8" style="background-image:url('photos/8.jpg')"></div>
    <div class="gallery-item" data-title="Ğ¤Ğ¾Ñ‚Ğ¾ 9" style="background-image:url('photos/9.jpg')"></div>
    <div class="gallery-item" data-title="Ğ¤Ğ¾Ñ‚Ğ¾ 10" style="background-image:url('photos/10.jpg')"></div>
    <div class="gallery-item" data-title="Ğ¤Ğ¾Ñ‚Ğ¾ 11" style="background-image:url('photos/11.jpg')"></div>
    <div class="gallery-item" data-title="Ğ¤Ğ¾Ñ‚Ğ¾ 12" style="background-image:url('photos/12.jpg')"></div>
  </div>
</section>

<section id="location" class="map-section">
  <div class="map-container">
    <div class="map-info">
      <h2>ĞšĞ°Ğº Ğ´Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒÑÑ</h2>

      <div class="location-item" onclick="copyText('Ğ´ĞµÑ€ĞµĞ²Ğ½Ñ Ğ¥Ğ»ĞµĞ¿ĞµĞ½ÑŒ, Ğ¡Ñ‹Ñ‡Ñ‘Ğ²ÑĞºĞ¸Ğ¹ Ñ€Ğ°Ğ¹Ğ¾Ğ½, Ğ¡Ğ¼Ğ¾Ğ»ĞµĞ½ÑĞºĞ°Ñ Ğ¾Ğ±Ğ»Ğ°ÑÑ‚ÑŒ, Ğ Ğ¾ÑÑĞ¸Ñ')">
        Ğ´ĞµÑ€ĞµĞ²Ğ½Ñ Ğ¥Ğ»ĞµĞ¿ĞµĞ½ÑŒ, Ğ¡Ñ‹Ñ‡Ñ‘Ğ²ÑĞºĞ¸Ğ¹ Ñ€-Ğ½, Ğ¡Ğ¼Ğ¾Ğ»ĞµĞ½ÑĞºĞ°Ñ Ğ¾Ğ±Ğ».
      </div>
      <div class="location-item" onclick="copyText('220 ĞºĞ¼ Ğ¾Ñ‚ ĞœĞ¾ÑĞºĞ²Ñ‹ Ğ¿Ğ¾ ĞĞ¾Ğ²Ğ¾Ñ€Ğ¸Ğ¶ÑĞºĞ¾Ğ¼Ñƒ ÑˆĞ¾ÑÑĞµ, 3.5 Ñ‡Ğ°ÑĞ° Ğ½Ğ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»Ğµ. 17 ĞºĞ¼ Ğ¾Ñ‚ Ğ³. Ğ¡Ñ‹Ñ‡Ñ‘Ğ²ĞºĞ°')">
        220 ĞºĞ¼ Ğ¾Ñ‚ ĞœĞ¾ÑĞºĞ²Ñ‹ â€¢ 17 ĞºĞ¼ Ğ¾Ñ‚ Ğ³. Ğ¡Ñ‹Ñ‡Ñ‘Ğ²ĞºĞ°
      </div>
      <div class="location-item" onclick="copyText('55.96231083712601, 34.46818181000816')">
        55.96231, 34.46818
      </div>

      <div class="map-buttons">
        <a href="yandexnavi://build_route_on_map?lat_to=55.96231&lon_to=34.46818" class="map-btn">ğŸš— Ğ¯Ğ½Ğ´ĞµĞºÑ ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ‚Ğ¾Ñ€</a>
        <a href="dgis://2gis.ru/routeSearch/rsType/car/to/34.46818,55.96231" class="map-btn">ğŸš— 2Ğ“Ğ˜Ğ¡</a>
        <button class="map-btn" onclick="shareLocation()">ğŸ“¤ ĞŸĞ¾Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒÑÑ</button>
        <button class="map-btn" onclick="copyText('Ğ´ĞµÑ€ĞµĞ²Ğ½Ñ Ğ¥Ğ»ĞµĞ¿ĞµĞ½ÑŒ, 55.96231, 34.46818')">ğŸ“‹ ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button>
      </div>
    </div>

    <div id="map"></div>
  </div>
</section>

<footer id="docs">
  <div class="footer-content">

    <div class="footer-column">
      <h4>ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹</h4>
      <ul>
        <li>ğŸ“ <a href="tel:+79964159405">+7 (996) 415-94-05</a></li>
        <li>ğŸ“§ <a href="mailto:sales@vazuza-fisherhouse.ru">sales@vazuza-fisherhouse.ru</a></li>
        <li>ğŸ“ Ğ´. Ğ¥Ğ»ĞµĞ¿ĞµĞ½ÑŒ, Ğ¡Ğ¼Ğ¾Ğ»ĞµĞ½ÑĞºĞ°Ñ Ğ¾Ğ±Ğ».</li>
        <li>ğŸŒ <a href="/" id="siteLinkFooter">vazuza-fisherhouse.ru</a></li>
      </ul>
    </div>

    <div class="footer-column">
      <h4>Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñ‹</h4>
      <div class="doc-links">
        <a class="doc-link" onclick="openDoc('offer')"><span class="doc-emoji">ğŸ“„</span>ĞÑ„ĞµÑ€Ñ‚Ğ°</a>
        <a class="doc-link" onclick="openDoc('privacy')"><span class="doc-emoji">ğŸ”’</span>ĞšĞ¾Ğ½Ñ„Ğ¸Ğ´ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ</a>
        <a class="doc-link" onclick="openDoc('rules')"><span class="doc-emoji">ğŸ¡</span>ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ¿Ñ€Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ</a>
        <a class="doc-link" onclick="openDoc('agreement')"><span class="doc-emoji">ğŸ§¾</span>Ğ¡Ğ¾Ğ³Ğ»Ğ°ÑˆĞµĞ½Ğ¸Ğµ</a>
      </div>
    </div>

    <div class="footer-column">
      <h4>Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ</h4>
      <ul>
        <li>ĞÑ€ĞµĞ½Ğ´Ğ¾Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ: Ğ•Ğ¼ĞµĞ»ÑŒÑĞ½Ğ¾Ğ² Ğ•.Ğ®.</li>
        <li>Ğ˜ĞĞ: 504409892030</li>
        <li>Ğ ĞµĞ¶Ğ¸Ğ¼ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹: 24/7</li>
        <li>Ğ—Ğ°ĞµĞ·Ğ´: Ñ 14:00</li>
      </ul>
    </div>

    <div class="footer-column">
      <h4>ĞœÑ‹ Ğ² ÑĞ¾Ñ†ÑĞµÑ‚ÑÑ…</h4>
      <ul>
        <li><a href="#">Telegram</a></li>
        <li><a href="#">WhatsApp</a></li>
        <li><a href="#">VK</a></li>
        <li><a href="#">Instagram</a></li>
      </ul>
    </div>

  </div>

  <div class="footer-bottom">
    <p>&copy; 2026 Ğ”Ğ¾Ğ¼ Ñƒ Ğ²Ğ¾Ğ´Ñ‹ Ğ¥Ğ»ĞµĞ¿ĞµĞ½ÑŒ. Ğ’ÑĞµ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ·Ğ°Ñ‰Ğ¸Ñ‰ĞµĞ½Ñ‹.</p>
    <p style="margin-top:10px">Ğ•Ğ¼ĞµĞ»ÑŒÑĞ½Ğ¾Ğ² Ğ•Ğ²Ğ³ĞµĞ½Ğ¸Ğ¹ Ğ®Ñ€ÑŒĞµĞ²Ğ¸Ñ‡, Ğ˜ĞĞ 504409892030</p>
  </div>
</footer>

<!-- MODAL DOCS -->
<div class="modal-overlay" id="docModal">
  <div class="modal" role="dialog" aria-modal="true">
    <div class="modal-header">
      <div class="modal-title" id="docTitle">Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚</div>
      <button class="modal-close" onclick="closeDoc()" aria-label="Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ">Ã—</button>
    </div>
    <div class="modal-body" id="docBody"></div>
  </div>
</div>

<script src="https://api-maps.yandex.ru/2.1/?apikey=YOUR_API_KEY&lang=ru_RU"></script>
<script>
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   CONFIG
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const CONFIG = {
  // Ğ¡Ğ®Ğ”Ğ Ğ’Ğ¡Ğ¢ĞĞ’Ğ˜Ğ¢Ğ¬ Ğ¢ĞĞ›Ğ¬ĞšĞ Web App URL Ğ²Ğ¸Ğ´Ğ°:
  // https://script.google.com/macros/s/AKfycb.../exec
  GOOGLE_APPS_SCRIPT_URL: "https://script.google.com/macros/s/AKfycbxIBZONriLNxz2Qh8r6zNnQ-J7rXf_uDK1UZzXXwtMJzEJaGFVwDtHBiJIoaQ_SxUMK/exec",

  // Ğ•ÑĞ»Ğ¸ Ğ½ĞµÑ‚ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ â€” Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿ÑƒÑÑ‚Ğ¾
  YOOKASSA_PAYMENT_URL: "",
};

const SITE_ORIGIN = location.origin;

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   helpers: Apps Script URL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function getAppsScriptUrl_(){
  const u = String(CONFIG.GOOGLE_APPS_SCRIPT_URL || '').trim();
  if(!u) return '';
  const ok = /^https:\/\/script\.google\.com\/macros\/s\/[A-Za-z0-9_-]+\/(exec|dev)(\?.*)?$/.test(u);
  return ok ? u : '';
}
function buildAppsScriptUrl_(params){
  const base = getAppsScriptUrl_();
  if(!base) return '';
  const url = new URL(base);
  if(params){
    for(const [k,v] of Object.entries(params)){
      url.searchParams.set(k, String(v));
    }
  }
  return url.toString();
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   NAV
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function scrollToSection(id){
  const el=document.getElementById(id);
  if(el) el.scrollIntoView({behavior:'smooth'});
}
window.addEventListener('scroll',()=>{
  const navbar=document.querySelector('nav');
  navbar.style.background = window.scrollY>100 ? 'rgba(11,45,58,0.96)' : 'rgba(11,45,58,0.92)';
});

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   COPY + SHARE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function copyText(text){
  navigator.clipboard.writeText(text).then(()=>{
    const n=document.getElementById('copyNotification');
    n.classList.add('show');
    setTimeout(()=>n.classList.remove('show'),1800);
  });
}
function shareLocation(){
  const text='Ğ”Ğ¾Ğ¼ Ñƒ Ğ²Ğ¾Ğ´Ñ‹ Ğ¥Ğ»ĞµĞ¿ĞµĞ½ÑŒ\nĞ´. Ğ¥Ğ»ĞµĞ¿ĞµĞ½ÑŒ, Ğ¡Ğ¼Ğ¾Ğ»ĞµĞ½ÑĞºĞ°Ñ Ğ¾Ğ±Ğ»Ğ°ÑÑ‚ÑŒ\n55.96231, 34.46818';
  const url=SITE_ORIGIN;
  if(navigator.share){
    navigator.share({title:'Ğ”Ğ¾Ğ¼ Ñƒ Ğ²Ğ¾Ğ´Ñ‹ Ğ¥Ğ»ĞµĞ¿ĞµĞ½ÑŒ',text, url}).catch(()=>{});
  }else{
    copyText(text+' '+url);
    alert('Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ¸ Ğ°Ğ´Ñ€ĞµÑ ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ğ² Ğ±ÑƒÑ„ĞµÑ€ Ğ¾Ğ±Ğ¼ĞµĞ½Ğ°.');
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   MAP
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
ymaps.ready(()=>{
  const map=new ymaps.Map("map",{center:[55.96231083712601,34.46818181000816],zoom:15,controls:['zoomControl','fullscreenControl']});
  const placemark=new ymaps.Placemark([55.96231083712601,34.46818181000816],{
    balloonContent:'<strong>Ğ”Ğ¾Ğ¼ Ñƒ Ğ²Ğ¾Ğ´Ñ‹ Ğ¥Ğ»ĞµĞ¿ĞµĞ½ÑŒ</strong><br>Ğ´. Ğ¥Ğ»ĞµĞ¿ĞµĞ½ÑŒ, Ğ¡Ğ¼Ğ¾Ğ»ĞµĞ½ÑĞºĞ°Ñ Ğ¾Ğ±Ğ»Ğ°ÑÑ‚ÑŒ<br>â˜ï¸ +7 (996) 415-94-05',
    hintContent:'Ğ”Ğ¾Ğ¼ Ñƒ Ğ²Ğ¾Ğ´Ñ‹'
  },{preset:'islands#blueHomeIcon'});
  map.geoObjects.add(placemark);
});

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   DOC MODALS (Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ğ» ĞºĞ°Ğº Ğ±Ñ‹Ğ»Ğ¾)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const DOCS = { /* ... Ğ²Ğ°Ñˆ Ğ±Ğ»Ğ¾Ğº DOCS Ğ±ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ ... */ };
/* Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğµ Ñ€Ğ°Ğ·Ğ´ÑƒĞ²Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» Ñ‚ÑƒÑ‚ Ğ² Ğ¾Ñ‚Ğ²ĞµÑ‚Ğµ â€” Ğ¾ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ Ğ²Ğ°Ñˆ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ DOCS ĞºĞ°Ğº ĞµÑÑ‚ÑŒ (Ğ¾Ğ½ ÑƒĞ¶Ğµ Ğ² Ğ²Ğ°ÑˆĞµĞ¼ Ñ„Ğ°Ğ¹Ğ»Ğµ) */

/* Ğ’ĞĞ–ĞĞ: ĞµÑĞ»Ğ¸ Ñƒ Ğ’Ğ°Ñ Ğ² Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¼ index.php ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ DOCS/openDoc/closeDoc â€” Ğ¾ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ ĞµĞ³Ğ¾. */

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   BOOKING SYSTEM
   GET Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµĞ¼:
   { ok:true, bookedDates:["YYYY-MM-DD"], paidDates:["YYYY-MM-DD"] }
   bookedDates = Ğ·Ğ°Ğ½ÑÑ‚Ñ‹Ğµ ĞĞĞ§Ğ˜ (checkIn..checkOut-1)
   paidDates   = Ğ¿Ğ¾Ğ´Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ¾ bookedDates, Ğ¾Ğ¿Ğ»Ğ°Ñ‡ĞµĞ½Ğ½Ñ‹Ğµ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let currentMonth=new Date();
let checkIn=null;
let checkOut=null;
let currentStep=1;

const RUB = '\u20BD';
const prices={weekday:7500,weekend:10000};

let unavailableDatesSet = new Set(); // Ğ·Ğ°Ğ½ÑÑ‚Ñ‹Ğµ Ğ½Ğ¾Ñ‡Ğ¸
let paidDatesSet = new Set();        // Ğ¾Ğ¿Ğ»Ğ°Ñ‡ĞµĞ½Ğ½Ñ‹Ğµ Ğ½Ğ¾Ñ‡Ğ¸

function isoDate(d){
  const z = new Date(d);
  z.setHours(0,0,0,0);
  const y = z.getFullYear();
  const m = String(z.getMonth()+1).padStart(2,'0');
  const day = String(z.getDate()).padStart(2,'0');
  return `${y}-${m}-${day}`;
}
function isUnavailableNight(date){
  return unavailableDatesSet.has(isoDate(date));
}
function isPaidNight(date){
  return paidDatesSet.has(isoDate(date));
}

async function loadBookedDates(){
  const url = buildAppsScriptUrl_({ action:'getBookedDates' });
  if(!url) return;

  try{
    const res = await fetch(url, { method:'GET', cache:'no-store' });
    const data = await res.json();

    const booked = Array.isArray(data?.bookedDates) ? data.bookedDates : [];
    const paid   = Array.isArray(data?.paidDates) ? data.paidDates : [];

    unavailableDatesSet = new Set(booked);
    paidDatesSet = new Set(paid);
  }catch(err){
    console.error('ĞÑˆĞ¸Ğ±ĞºĞ° Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ·Ğ°Ğ½ÑÑ‚Ñ‹Ñ… Ğ´Ğ°Ñ‚:', err);
  }
}

/* ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ğ° Ğ½Ğ° Ğ·Ğ°Ğ½ÑÑ‚Ñ‹Ğµ Ğ½Ğ¾Ñ‡Ğ¸ (inclusive) */
function rangeHasUnavailable(start,endInclusive){
  if(!start || !endInclusive) return false;
  const s = new Date(start); s.setHours(0,0,0,0);
  const e = new Date(endInclusive); e.setHours(0,0,0,0);
  for(let d=new Date(s); d<=e; d.setDate(d.getDate()+1)){
    if(isUnavailableNight(d)) return true;
  }
  return false;
}

function renderCalendar(){
  const year=currentMonth.getFullYear();
  const month=currentMonth.getMonth();
  const firstDay=new Date(year,month,1);
  const lastDay=new Date(year,month+1,0);
  const startDay=firstDay.getDay()||7;

  document.getElementById('calendarTitle').textContent = firstDay.toLocaleDateString('ru-RU',{month:'long',year:'numeric'});
  const daysGrid=document.getElementById('calendarDays');
  daysGrid.innerHTML='';

  for(let i=1;i<startDay;i++){
    const empty=document.createElement('div');
    daysGrid.appendChild(empty);
  }

  for(let day=1;day<=lastDay.getDate();day++){
    const dayEl=document.createElement('div');
    dayEl.className='calendar-day';
    dayEl.textContent=day;

    const date=new Date(year,month,day);
    const today=new Date(); today.setHours(0,0,0,0);

    // Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¾Ğµ
    if(date<today){
      dayEl.classList.add('disabled');
      daysGrid.appendChild(dayEl);
      continue;
    }

    const unavailable = isUnavailableNight(date);
    const paid = isPaidNight(date);

    // Ğ’ĞĞ–ĞĞ: Ğ·Ğ°Ğ½ÑÑ‚Ñ‹Ğµ Ğ½Ğ¾Ñ‡Ğ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼, Ğ½Ğ¾:
    // - Ğ½ĞµĞ»ÑŒĞ·Ñ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°Ñ‚ÑŒ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (checkIn) Ğ½Ğ° Ğ·Ğ°Ğ½ÑÑ‚Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ
    // - Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ½ÑÑ‚Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ ĞºĞ°Ğº Ğ´Ğ°Ñ‚Ñƒ Ğ’Ğ«Ğ•Ğ—Ğ”Ğ (checkOut), ĞµÑĞ»Ğ¸ checkIn ÑƒĞ¶Ğµ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½
    if(unavailable){
      dayEl.classList.add(paid ? 'paid' : 'booked');

      const canUseAsCheckout = (checkIn && !checkOut && date > checkIn);
      if(canUseAsCheckout){
        dayEl.classList.add('can-checkout');
        dayEl.onclick = ()=>selectDate(date, { allowEndOnUnavailable:true });
      }else{
        dayEl.style.cursor='not-allowed';
        dayEl.onclick = ()=> {
          const msg = paid ? 'Ğ­Ñ‚Ğ° Ğ´Ğ°Ñ‚Ğ° Ğ·Ğ°Ğ½ÑÑ‚Ğ° (ĞĞŸĞ›ĞĞ§Ğ•ĞĞ).' : 'Ğ­Ñ‚Ğ° Ğ´Ğ°Ñ‚Ğ° Ğ·Ğ°Ğ½ÑÑ‚Ğ°.';
          alert(msg + ' Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³ÑƒÑ Ğ´Ğ°Ñ‚Ñƒ.');
        };
      }
    }else{
      dayEl.onclick=()=>selectDate(date, { allowEndOnUnavailable:false });
    }

    // Ğ¿Ğ¾Ğ´ÑĞ²ĞµÑ‚ĞºĞ¸
    if(checkIn && date.getTime()===checkIn.getTime()) dayEl.classList.add('selected');
    if(checkOut && date.getTime()===checkOut.getTime()) dayEl.classList.add('selected');
    if(checkIn && checkOut && date>checkIn && date<checkOut) dayEl.classList.add('in-range');

    daysGrid.appendChild(dayEl);
  }
}

function changeMonth(delta){
  currentMonth.setMonth(currentMonth.getMonth()+delta);
  renderCalendar();
}

function selectDate(date, opts){
  const allowEndOnUnavailable = !!opts?.allowEndOnUnavailable;

  // Ğ•ÑĞ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ñ‹Ñ‚Ğ°ĞµÑ‚ÑÑ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ğ½Ğ° Ğ·Ğ°Ğ½ÑÑ‚Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ â€” Ğ·Ğ°Ğ¿Ñ€ĞµÑ‚
  if(!checkIn || checkOut){
    if(isUnavailableNight(date)){
      alert(isPaidNight(date) ? 'Ğ­Ñ‚Ğ° Ğ´Ğ°Ñ‚Ğ° Ğ·Ğ°Ğ½ÑÑ‚Ğ° (ĞĞŸĞ›ĞĞ§Ğ•ĞĞ). Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³ÑƒÑ.' : 'Ğ­Ñ‚Ğ° Ğ´Ğ°Ñ‚Ğ° Ğ·Ğ°Ğ½ÑÑ‚Ğ°. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³ÑƒÑ.');
      return;
    }
    checkIn = new Date(date); checkIn.setHours(0,0,0,0);
    checkOut = null;
    renderCalendar();
    updateSummary();
    return;
  }

  // Ñ‚ÑƒÑ‚ checkIn ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ, checkOut ĞµÑ‰Ñ‘ Ğ½ĞµÑ‚
  const d = new Date(date); d.setHours(0,0,0,0);

  // ĞºĞ»Ğ¸Ğº Ğ½Ğ°Ğ·Ğ°Ğ´ â€” Ğ¼ĞµĞ½ÑĞµĞ¼ checkIn, Ğ½Ğ¾ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ğ¾
  if(d < checkIn){
    if(isUnavailableNight(d)){
      alert(isPaidNight(d) ? 'Ğ­Ñ‚Ğ° Ğ´Ğ°Ñ‚Ğ° Ğ·Ğ°Ğ½ÑÑ‚Ğ° (ĞĞŸĞ›ĞĞ§Ğ•ĞĞ). Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³ÑƒÑ.' : 'Ğ­Ñ‚Ğ° Ğ´Ğ°Ñ‚Ğ° Ğ·Ğ°Ğ½ÑÑ‚Ğ°. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³ÑƒÑ.');
      return;
    }
    checkIn = d;
    checkOut = null;
    renderCalendar();
    updateSummary();
    return;
  }

  // Ğ¿Ñ‹Ñ‚Ğ°ĞµĞ¼ÑÑ Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ checkOut
  // checkOut Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ·Ğ°Ğ½ÑÑ‚Ñ‹Ğ¼ Ğ´Ğ½Ñ‘Ğ¼, Ğ½Ğ¾ ÑÑ‚Ğ¾ Ğ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ğ¾ ĞºĞ°Ğº "Ğ´Ğ°Ñ‚Ğ° Ğ²Ñ‹ĞµĞ·Ğ´Ğ°"
  if(isUnavailableNight(d) && !allowEndOnUnavailable){
    alert(isPaidNight(d) ? 'Ğ­Ñ‚Ğ° Ğ´Ğ°Ñ‚Ğ° Ğ·Ğ°Ğ½ÑÑ‚Ğ° (ĞĞŸĞ›ĞĞ§Ğ•ĞĞ). Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³ÑƒÑ.' : 'Ğ­Ñ‚Ğ° Ğ´Ğ°Ñ‚Ğ° Ğ·Ğ°Ğ½ÑÑ‚Ğ°. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³ÑƒÑ.');
    return;
  }

  checkOut = d;

  // Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ñ‡Ñ‚Ğ¾ Ğ½Ğ¾Ñ‡Ğ¸ (checkIn..checkOut-1) ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ñ‹
  const lastNight = new Date(checkOut);
  lastNight.setDate(lastNight.getDate()-1);

  if(rangeHasUnavailable(checkIn, lastNight)){
    alert('Ğ’ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ¼ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğµ ĞµÑÑ‚ÑŒ Ğ·Ğ°Ğ½ÑÑ‚Ñ‹Ğµ (Ğ¸Ğ»Ğ¸ Ğ¾Ğ¿Ğ»Ğ°Ñ‡ĞµĞ½Ğ½Ñ‹Ğµ) Ğ½Ğ¾Ñ‡Ğ¸. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½.');
    checkOut = null;
  }

  renderCalendar();
  updateSummary();
}

function updateSummary(){
  if(!checkIn || !checkOut){
    document.getElementById('bookingSummary').style.display='none';
    document.getElementById('step1Next').disabled=true;
    return;
  }

  const nights = Math.ceil((checkOut - checkIn)/(1000*60*60*24));
  if(nights < 2){
    // Ğ­Ñ‚Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ¢ĞĞ›Ğ¬ĞšĞ ĞºĞ¾Ğ³Ğ´Ğ° Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ñ‹ Ğ¾Ğ±Ğµ Ğ´Ğ°Ñ‚Ñ‹ Ğ¸ Ğ½Ğ¾Ñ‡ĞµĞ¹ < 2
    alert('ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ â€” 2 Ğ½Ğ¾Ñ‡Ğ¸');
    checkOut=null;
    renderCalendar();
    updateSummary();
    return;
  }

  let total=0;
  for(let d=new Date(checkIn); d<checkOut; d.setDate(d.getDate()+1)){
    const day=d.getDay();
    total += (day===0||day===6)?prices.weekend:prices.weekday;
  }

  document.getElementById('bookingSummary').style.display='block';
  document.getElementById('checkInDate').textContent = checkIn.toLocaleDateString('ru-RU');
  document.getElementById('checkOutDate').textContent = checkOut.toLocaleDateString('ru-RU');
  document.getElementById('nightsCount').textContent = nights;
  document.getElementById('totalPrice').textContent = total.toLocaleString('ru-RU') + RUB;
  document.getElementById('step1Next').disabled=false;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Ğ’ĞĞ›Ğ˜Ğ”ĞĞ¦Ğ˜Ğ¯ ĞšĞĞĞ¢ĞĞšĞ¢ĞĞ’
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function setErr(id, msg){
  const el = document.getElementById(id);
  if(!el) return;
  if(msg){
    el.textContent = msg;
    el.classList.add('show');
  }else{
    el.textContent = '';
    el.classList.remove('show');
  }
}
function validateEmail(email){
  return /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(String(email||'').trim());
}
function validatePhone(phone){
  const digits = String(phone||'').replace(/\D/g,'');
  return digits.length >= 10; // Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 10 Ñ†Ğ¸Ñ„Ñ€ (Ğ´Ğ»Ñ Ğ Ğ¤ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ 11, Ğ½Ğ¾ Ğ¿ÑƒÑÑ‚ÑŒ Ğ±ÑƒĞ´ĞµÑ‚ Ğ¼ÑĞ³Ñ‡Ğµ)
}
function validateGuestFields(showAlerts){
  const name = document.getElementById('guestName')?.value.trim() || '';
  const phone = document.getElementById('guestPhone')?.value.trim() || '';
  const email = document.getElementById('guestEmail')?.value.trim() || '';
  const guestsRaw = document.getElementById('guestCount')?.value || '0';
  const guests = Number(guestsRaw);

  let ok = true;

  setErr('errName', '');
  setErr('errPhone', '');
  setErr('errEmail', '');
  setErr('errGuests', '');

  if(!name){
    ok = false;
    setErr('errName','Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ¸Ğ¼Ñ Ğ¸ Ñ„Ğ°Ğ¼Ğ¸Ğ»Ğ¸Ñ.');
  }
  if(!phone || !validatePhone(phone)){
    ok = false;
    setErr('errPhone','Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½ (Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 10 Ñ†Ğ¸Ñ„Ñ€).');
  }
  if(!email || !validateEmail(email)){
    ok = false;
    setErr('errEmail','Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ğ¹ email.');
  }
  if(!Number.isFinite(guests) || guests < 1 || guests > 8){
    ok = false;
    setErr('errGuests','ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ³Ğ¾ÑÑ‚ĞµĞ¹: Ğ¾Ñ‚ 1 Ğ´Ğ¾ 8.');
  }

  if(!ok && showAlerts){
    alert('ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ¿Ğ¾Ğ»Ñ: Ğ¸Ğ¼Ñ, Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½, email Ğ¸ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ³Ğ¾ÑÑ‚ĞµĞ¹.');
  }
  return ok;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   STEPS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function goToStep(step){
  // Ğ¿ĞµÑ€ĞµĞ´ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¾Ğ¼ Ğ½Ğ° ÑˆĞ°Ğ³ 3 â€” Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€ÑƒĞµĞ¼ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹
  if(step === 3){
    const ok = validateGuestFields(true);
    if(!ok) return;
  }

  document.getElementById(`bookingStep${currentStep}`).style.display='none';
  document.getElementById(`step${currentStep}Circle`).classList.remove('active');

  if(step<currentStep){
    for(let i=currentStep;i>step;i--){
      document.getElementById(`step${i}Circle`).classList.remove('completed');
    }
  }else{
    document.getElementById(`step${currentStep}Circle`).classList.add('completed');
  }

  currentStep=step;
  document.getElementById(`bookingStep${currentStep}`).style.display='block';
  document.getElementById(`step${currentStep}Circle`).classList.add('active');

  if(step===3){
    let total=0;
    for(let d=new Date(checkIn); d<checkOut; d.setDate(d.getDate()+1)){
      const day=d.getDay();
      total+=(day===0||day===6)?prices.weekend:prices.weekday;
    }
    document.getElementById('finalDates').textContent=`${checkIn.toLocaleDateString('ru-RU')} - ${checkOut.toLocaleDateString('ru-RU')}`;
    document.getElementById('finalGuests').textContent=`${document.getElementById('guestCount').value} Ñ‡ĞµĞ».`;
    document.getElementById('finalTotal').textContent=total.toLocaleString('ru-RU') + RUB;
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   PAYLOAD + POST
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function getBookingPayload(status){
  if(!validateGuestFields(true)) return null;

  if(!checkIn || !checkOut){
    alert('ĞĞµ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ñ‹ Ğ´Ğ°Ñ‚Ñ‹ Ğ·Ğ°ĞµĞ·Ğ´Ğ°/Ğ²Ñ‹ĞµĞ·Ğ´Ğ°. Ğ’ĞµÑ€Ğ½Ğ¸Ñ‚ĞµÑÑŒ Ğ½Ğ° ÑˆĞ°Ğ³ 1 Ğ¸ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´.');
    return null;
  }

  const nights = Math.ceil((checkOut - checkIn)/(1000*60*60*24));
  if(nights < 2){
    alert('ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ â€” 2 Ğ½Ğ¾Ñ‡Ğ¸');
    return null;
  }

  let total=0;
  for(let d=new Date(checkIn); d<checkOut; d.setDate(d.getDate()+1)){
    const day=d.getDay();
    total += (day===0||day===6)?prices.weekend:prices.weekday;
  }

  const ci = isoDate(checkIn);
  const co = isoDate(checkOut);

  const name=document.getElementById('guestName').value.trim();
  const phone=document.getElementById('guestPhone').value.trim();
  const email=document.getElementById('guestEmail').value.trim();
  const guests = String(document.getElementById('guestCount').value || '');
  const comment = String(document.getElementById('guestComment').value || '');

  return {
    action: 'createBooking',
    status: status,                  // pending | confirmed
    paid: (status === 'confirmed'),  // Ğ½Ğ° Ğ²ÑÑĞºĞ¸Ğ¹ ÑĞ»ÑƒÑ‡Ğ°Ğ¹

    checkIn: ci, checkOut: co,
    check_in: ci, check_out: co,

    // Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ ĞºĞ»ÑÑ‡ĞµĞ¹ Ğ¿Ğ¾Ğ´ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Ğ²ĞµÑ€ÑĞ¸Ğ¸ Code.gs
    start_date: ci, end_date: co,
    date_from: ci, date_to: co,

    nights,
    total,

    name, phone, email,
    guestName: name, guestPhone: phone, guestEmail: email,
    guest_name: name, guest_phone: phone, guest_email: email,

    guests,
    guestCount: guests,
    guest_count: guests,
    guests_count: guests,

    comment,
    pageUrl: location.href,
  };
}

async function postBooking(payload){
  if(!payload) return { ok:false, error:'no payload' };

  const url = getAppsScriptUrl_();
  if(!url){
    alert('ĞĞµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½ GOOGLE_APPS_SCRIPT_URL (Web App Apps Script).');
    return { ok:false, error:'no script url' };
  }

  const overlay=document.getElementById('loadingOverlay');
  overlay.classList.add('active');

  try{
    const res = await fetch(url, {
      method:'POST',
      headers:{'Content-Type':'text/plain;charset=utf-8'},
      body: JSON.stringify(payload),
      redirect:'follow',
      cache:'no-store'
    });

    const text = await res.text();
    try{
      return JSON.parse(text);
    }catch(_){
      return { ok:false, error:'bad response (not json): ' + text.slice(0,300) };
    }
  }catch(e){
    console.error(e);
    return { ok:false, error:String(e) };
  }finally{
    overlay.classList.remove('active');
  }
}

async function sendRequest(){
  const payload = getBookingPayload('pending');
  const result = await postBooking(payload);

  if(result && result.ok){
    document.getElementById('successText').textContent = 'Ğ—Ğ°ÑĞ²ĞºĞ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ°. Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ.';
    document.getElementById('successMessage').classList.add('show');
    document.getElementById('requestBtn').disabled=true;
    document.getElementById('payBtn').disabled=true;

    // Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ğ¼ ĞºĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ Ğ¿Ğ¾ÑĞ»Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ¹ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸
    await loadBookedDates();
    renderCalendar();
    return;
  }
  alert('ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°ÑĞ²ĞºÑƒ: ' + (result && result.error ? result.error : 'Ğ¾ÑˆĞ¸Ğ±ĞºĞ°'));
}

async function payAndConfirm(){
  const payload = getBookingPayload('confirmed');
  const result = await postBooking(payload);

  if(!(result && result.ok)){
    alert('ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¾Ğ¿Ğ»Ğ°Ñ‡Ğ¸Ğ²Ğ°ĞµĞ¼ÑƒÑ Ğ±Ñ€Ğ¾Ğ½ÑŒ: ' + (result && result.error ? result.error : 'Ğ¾ÑˆĞ¸Ğ±ĞºĞ°'));
    return;
  }

  document.getElementById('successText').textContent = 'Ğ‘Ñ€Ğ¾Ğ½ÑŒ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ°. ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¸Ğ¼ Ğº Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğµ...';
  document.getElementById('successMessage').classList.add('show');

  await loadBookedDates();
  renderCalendar();

  if(CONFIG.YOOKASSA_PAYMENT_URL && CONFIG.YOOKASSA_PAYMENT_URL.trim() !== ''){
    window.location.href = CONFIG.YOOKASSA_PAYMENT_URL;
  }else{
    alert('Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñƒ Ğ®Kassa Ğ½Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ° (CONFIG.YOOKASSA_PAYMENT_URL).');
  }
}

/* INIT */
(async function init(){
  const siteLink = document.getElementById('siteLinkFooter');
  if(siteLink){
    siteLink.href = SITE_ORIGIN + '/';
    siteLink.textContent = SITE_ORIGIN.replace(/^https?:\/\//,'');
  }

  await loadBookedDates();
  renderCalendar();
})();
</script>
</body>
</html>
    